# 🌐 ChessSudoku 서버 외부 접근 설정 가이드

## 1. 로컬 네트워크에서 접근하기 (가장 간단)

### 현재 적용된 설정
- 서버가 `0.0.0.0:3000`에서 실행되어 모든 네트워크 인터페이스에서 접근 가능
- 개발 환경에서 CORS가 모든 origin을 허용
- 서버 시작 시 자동으로 로컬 IP 주소를 표시

### 사용 방법
1. 서버를 시작하면 콘솔에 표시되는 네트워크 주소를 확인
2. 같은 WiFi/네트워크에 있는 다른 기기에서 해당 주소로 접근

```
🌐 네트워크 접근: http://192.168.1.100:3000
```

### 방화벽 설정 (Windows)
Windows 방화벽에서 포트 3000을 허용해야 할 수 있습니다:

```powershell
# PowerShell을 관리자 권한으로 실행
netsh advfirewall firewall add rule name="ChessSudoku Server" dir=in action=allow protocol=TCP localport=3000
```

## 2. 인터넷에서 접근하기 (고급)

### 방법 A: 포트 포워딩 (권장하지 않음)
라우터 설정에서 포트 3000을 내부 IP로 포워딩
⚠️ **보안 위험**: 외부에서 직접 접근 가능하므로 위험

### 방법 B: ngrok 사용 (임시 테스트용)

1. ngrok 설치: https://ngrok.com/download
2. 명령어 실행:
```bash
ngrok http 3000
```
3. 제공되는 공개 URL로 접근 가능

### 방법 C: 클라우드 배포 (프로덕션용)

#### Heroku 배포
```bash
# Heroku CLI 설치 후
heroku create your-app-name
git push heroku main
```

#### Railway 배포
```bash
# Railway CLI 설치 후
railway login
railway init
railway up
```

#### Render 배포
1. GitHub 저장소와 연결
2. 자동 배포 설정

## 3. 환경 설정

### .env 파일 설정
```env
# 서버 설정
PORT=3000
NODE_ENV=development

# CORS 설정 (프로덕션에서는 특정 도메인만 허용)
CORS_ORIGIN=https://your-frontend-domain.com,https://another-domain.com

# 데이터베이스 설정
DB_HOST=localhost
DB_PORT=5432
DB_NAME=chessudoku
DB_USER=chessudoku_user
DB_PASSWORD=your_secure_password_here
```

### 프로덕션 환경 설정
프로덕션에서는 보안을 위해 다음을 수정하세요:

1. `NODE_ENV=production` 설정
2. `CORS_ORIGIN`에 허용할 도메인만 명시
3. HTTPS 사용 권장
4. 방화벽 및 보안 그룹 설정

## 4. 보안 고려사항

### 개발 환경
- 현재 설정은 개발용으로 모든 CORS 요청을 허용
- 로컬 네트워크에서만 사용 권장

### 프로덕션 환경
- HTTPS 사용 필수
- 특정 도메인만 CORS 허용
- 인증/인가 시스템 구현
- 레이트 리미팅 적용
- 보안 헤더 설정

## 5. 테스트 방법

### 로컬 네트워크 테스트
1. 서버 시작: `npm run dev`
2. 다른 기기에서 브라우저로 접근
3. API 테스트: `http://[IP주소]:3000/api/health`

### 외부 접근 테스트
1. ngrok 또는 클라우드 배포 후
2. 공개 URL로 접근 테스트
3. 모바일 데이터로 접근 테스트

## 6. 문제 해결

### 접근이 안 될 때
1. 방화벽 설정 확인
2. 라우터 설정 확인
3. IP 주소가 올바른지 확인
4. 포트가 사용 중인지 확인: `netstat -an | findstr :3000`

### CORS 에러가 발생할 때
1. 개발 환경인지 확인 (`NODE_ENV=development`)
2. 브라우저 개발자 도구에서 에러 메시지 확인
3. 필요시 특정 도메인을 `CORS_ORIGIN`에 추가
